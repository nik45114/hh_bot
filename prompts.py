"""Default prompts for cover letter generation"""

# Промпт для IT-специалистов
IT_PROMPT_TEMPLATE = """
На основе следующих данных о кандидате создай профессиональное сопроводительное письмо 
для вакансии "{vacancy_title}" в компании "{company_name}".

Данные кандидата:
- Имя: {user_name}
- Позиция: {position}
- Опыт и экспертиза: {summary}
- Ключевые навыки: {skills}

Описание вакансии:
{job_description}

Требования к письму:
1. Длина 150-250 слов
2. Профессиональный технический тон
3. Акцент на технических навыках и опыте разработки
4. Покажи соответствие технического стека требованиям вакансии
5. Подчеркни опыт работы с конкретными технологиями из описания
6. Продемонстрируй готовность к обучению и развитию
7. Вырази интерес к технологиям компании
8. Заверши уверенным призывом к действию

Важно:
- Не используй шаблонные фразы типа "С уважением" в конце
- Избегай банальностей, фокусируйся на конкретных проектах и технологиях
- Письмо должно звучать как от опытного IT-специалиста
- Пиши на русском языке
"""

# Промпт для управленческих позиций
MANAGEMENT_PROMPT_TEMPLATE = """
На основе следующих данных о кандидате создай профессиональное сопроводительное письмо 
для вакансии "{vacancy_title}" в компании "{company_name}".

Данные кандидата:
- Имя: {user_name}
- Позиция: {position}
- Опыт и экспертиза: {summary}
- Ключевые навыки: {skills}
{location_info}

Описание вакансии:
{job_description}

Требования к письму:
1. Длина 150-250 слов
2. Профессиональный деловой тон, подходящий для управленческой позиции
3. Акцент на лидерский и управленческий опыт, конкретные бизнес-результаты
4. Покажи соответствие опыта и компетенций требованиям вакансии
5. Подчеркни опыт запуска проектов с нуля, построения команд, достижения KPI
6. Если вакансия удалённая - отметь опыт удалённого управления командами
7. Продемонстрируй стратегическое мышление и готовность брать ответственность
8. Вырази интерес к компании и понимание её бизнеса
9. Заверши уверенным призывом к действию

Важно:
- Не используй шаблонные фразы типа "С уважением" в конце
- Избегай банальностей, фокусируйся на конкретных достижениях и цифрах
- Письмо должно звучать как от опытного руководителя
- Пиши на русском языке
"""

# Универсальный промпт
UNIVERSAL_PROMPT_TEMPLATE = """
На основе следующих данных о кандидате создай профессиональное сопроводительное письмо 
для вакансии "{vacancy_title}" в компании "{company_name}".

Данные кандидата:
- Имя: {user_name}
- Позиция: {position}
- Опыт и экспертиза: {summary}
- Ключевые навыки: {skills}
{location_info}

Описание вакансии:
{job_description}

Требования к письму:
1. Длина 150-250 слов
2. Профессиональный деловой тон
3. Акцент на релевантном опыте и навыках
4. Покажи соответствие требованиям вакансии
5. Подчеркни конкретные достижения
6. Вырази интерес к компании и позиции
7. Заверши уверенным призывом к действию

Важно:
- Не используй шаблонные фразы типа "С уважением" в конце
- Избегай банальностей, фокусируйся на конкретике
- Пиши на русском языке
"""


def get_default_prompt(role_domain: str = 'IT') -> str:
    """
    Получить дефолтный промпт для указанной области
    
    Args:
        role_domain: 'IT', 'Management', или другое
        
    Returns:
        Шаблон промпта
    """
    if role_domain == 'IT':
        return IT_PROMPT_TEMPLATE
    elif role_domain == 'Management':
        return MANAGEMENT_PROMPT_TEMPLATE
    else:
        return UNIVERSAL_PROMPT_TEMPLATE


def format_prompt(prompt_template: str, vacancy_data: dict, user_data: dict) -> str:
    """
    Форматировать промпт с данными вакансии и пользователя
    
    Args:
        prompt_template: Шаблон промпта
        vacancy_data: Данные вакансии (title, company, description, schedule, location)
        user_data: Данные пользователя (name, position, summary, skills)
        
    Returns:
        Отформатированный промпт
    """
    # Подготовка данных для форматирования
    location_info = ""
    if vacancy_data.get('schedule') == 'remote':
        location_info = "- Формат работы: Готов к удалённой работе"
    elif vacancy_data.get('location'):
        location_info = f"- Локация: {vacancy_data['location']}"
    
    # Форматирование промпта
    formatted = prompt_template.format(
        vacancy_title=vacancy_data.get('title', 'вакансия'),
        company_name=vacancy_data.get('company', 'компания'),
        job_description=vacancy_data.get('description', '')[:1000],  # Ограничиваем длину
        user_name=user_data.get('name', 'Кандидат'),
        position=user_data.get('position', 'Специалист'),
        summary=user_data.get('summary', ''),
        skills=', '.join(user_data.get('skills', [])),
        location_info=location_info
    )
    
    return formatted
